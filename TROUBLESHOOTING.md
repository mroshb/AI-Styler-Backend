# ุฑุงูููุง ุนุจโุงุจ ุฑุจุงุช ุชูฺฏุฑุงู

## ูุดฺฉู: ุฑุจุงุช ุงุณุชุงุฑุช ูโุดูุฏ ูู ฺุฒ ููโุขุฏ

### ุจุฑุฑุณโูุง ุงููู

1. **ุจุฑุฑุณ TOKEN:**
   ```bash
   # ุจุฑุฑุณ ฺฉูุฏ ฺฉู TOKEN ุฏุฑุณุช ุชูุธู ุดุฏู
   cat .env.bot | grep TELEGRAM_BOT_TOKEN
   ```

2. **ุจุฑุฑุณ ูุงฺฏโูุง:**
   ุฑุจุงุช ุจุงุฏ ุงู ูุงฺฏโูุง ุฑุง ูุดุงู ุฏูุฏ:
   ```
   Starting Telegram bot in development mode...
   Creating bot with token: 8578746464...
   Bot authenticated successfully! Username: @chi_beposham_bot (ID: ...)
   Starting bot in polling mode...
   Getting updates channel...
   โ Bot is now listening for updates! Send /start to test.
   โ Bot service started successfully!
   ๐ฑ Send /start to your bot to test it
   ```

3. **ุจุฑุฑุณ ุงุชุตุงู ุจู ุฏุชุงุจุณ:**
   ุงฺฏุฑ ุฎุทุง ุงุชุตุงู ุจู PostgreSQL ูโุจูุฏุ ุฑุจุงุช ูุชููู ูโุดูุฏ.

4. **ุจุฑุฑุณ Redis:**
   Redis ุงุฎุชุงุฑ ุงุณุช. ุงฺฏุฑ Redis ุฏุฑ ุฏุณุชุฑุณ ูุจุงุดุฏุ ุฑุจุงุช ุจุง warning ุงุฏุงูู ูโุฏูุฏ.

### ูุฑุงุญู ุนุจโุงุจ

#### ูุฑุญูู 1: ุจุฑุฑุณ ูพฺฉุฑุจูุฏ
```bash
# ฺฉูพ ูุงู ููููู
cp configs/example.env .env.bot

# ูุฑุงุด ู ุชูุธู TOKEN
nano .env.bot
# ุง
vim .env.bot
```

#### ูุฑุญูู 2: ุชูุธู ูุชุบุฑูุง ูุญุท
```bash
# ุจุงุฑฺฏุฐุงุฑ ูุชุบุฑูุง ูุญุท
export $(cat .env.bot | xargs)

# ุจุฑุฑุณ TOKEN
echo $TELEGRAM_BOT_TOKEN
```

#### ูุฑุญูู 3: ุงุฌุฑุง ุฑุจุงุช
```bash
# ุงุฌุฑุง ูุณุชูู
go run cmd/bot/main.go

# ุง ุจุง Make
make bot-run
```

#### ูุฑุญูู 4: ุชุณุช ุฑุจุงุช
1. ุฏุฑ Telegram ุจู ุฑุจุงุช ุฎูุฏ ูพุงู ุฏูุฏ: `/start`
2. ูุงฺฏโูุง ุจุงุฏ ุงู ุฑุง ูุดุงู ุฏููุฏ:
   ```
   ๐จ Handling message from user ...: command='start', text='/start'
   ๐ฏ Processing /start command from user ...
   ```

### ูุดฺฉูุงุช ุฑุงุฌ

#### ูุดฺฉู 1: "TELEGRAM_BOT_TOKEN is required"
**ุฑุงู ุญู:**
- ูุงู `.env.bot` ุฑุง ุงุฌุงุฏ ฺฉูุฏ
- TOKEN ุฑุง ุฏุฑ ุขู ุชูุธู ฺฉูุฏ
- ุง ูุชุบุฑ ูุญุท ุฑุง export ฺฉูุฏ

#### ูุดฺฉู 2: "Failed to initialize database"
**ุฑุงู ุญู:**
- PostgreSQL ุจุงุฏ ุฏุฑ ุญุงู ุงุฌุฑุง ุจุงุดุฏ
- DSN ุฑุง ุฏุฑ `.env.bot` ุจุฑุฑุณ ฺฉูุฏ
- ุง ุฏุชุงุจุณ ุฑุง ุบุฑูุนุงู ฺฉูุฏ (ูุงุฒ ุจู ุชุบุฑ ฺฉุฏ)

#### ูุดฺฉู 3: "Failed to verify bot token"
**ุฑุงู ุญู:**
- TOKEN ุฑุง ุงุฒ @BotFather ุฏูุจุงุฑู ุฏุฑุงูุช ฺฉูุฏ
- ูุทูุฆู ุดูุฏ TOKEN ฺฉุงูู ู ุฏุฑุณุช ุงุณุช
- ุจุฑุฑุณ ฺฉูุฏ ฺฉู TOKEN ุฏุฑ `.env.bot` ุจุฏูู ูุงุตูู ุงุถุงู ุงุณุช

#### ูุดฺฉู 4: ุฑุจุงุช ุงุณุชุงุฑุช ูโุดูุฏ ูู ูพุงู ููโุฏูุฏ
**ุจุฑุฑุณ:**
1. ุขุง ูุงฺฏ "โ Bot is now listening for updates!" ุฑุง ูโุจูุฏุ
2. ุขุง ูพุงู `/start` ุฑุง ุจู ุฑุจุงุช ูุฑุณุชุงุฏูโุงุฏุ
3. ุขุง ูุงฺฏ "๐จ Handling message" ุฑุง ูโุจูุฏุ

**ุฑุงู ุญู:**
- ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุฑุจุงุช ุฑุง ุฏุฑ Telegram unblock ูฺฉุฑุฏูโุงุฏ
- ุจุฑุฑุณ ฺฉูุฏ ฺฉู TOKEN ูุฑุจูุท ุจู ููุงู ุฑุจุงุช ุงุณุช
- ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุฑุจุงุช ุฏุฑ ุญุงูุช polling ุงุณุช (ูู webhook)

#### ูุดฺฉู 5: "Rate limit check error"
**ุฑุงู ุญู:**
- ุงู ฺฉ warning ุงุณุช ู ุฑุจุงุช ุจุงุฏ ฺฉุงุฑ ฺฉูุฏ
- ุงฺฏุฑ Redis ุฏุฑ ุฏุณุชุฑุณ ูุณุชุ rate limiting ฺฉุงุฑ ููโฺฉูุฏ ูู ุฑุจุงุช ุจุงุฏ ฺฉุงุฑ ฺฉูุฏ

### ุชุณุช ุณุฑุน

```bash
# 1. ุจุฑุฑุณ TOKEN
export $(cat .env.bot | xargs)
echo "Token: ${TELEGRAM_BOT_TOKEN:0:10}..."

# 2. ุชุณุช ุงุชุตุงู ุจู Telegram API
curl "https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/getMe"

# 3. ุงุฌุฑุง ุฑุจุงุช
go run cmd/bot/main.go
```

### ูุงฺฏโูุง ููุฏ

ุจุง ูุงฺฏโูุง ุฌุฏุฏุ ุจุงุฏ ุงู ููุงุฑุฏ ุฑุง ุจุจูุฏ:
- โ ุงุชุตุงู ูููู ุจู Telegram
- โ ุดุฑูุน polling
- โ ุฏุฑุงูุช ูพุงูโูุง
- โ ูพุฑุฏุงุฒุด ุฏุณุชูุฑุงุช

ุงฺฏุฑ ุงู ูุงฺฏโูุง ุฑุง ููโุจูุฏุ ูุดฺฉู ุฏุฑ ฺฉุฏุงู ูุฑุญูู ุงุณุชุ

### ุชูุงุณ ุจุฑุง ฺฉูฺฉ

ุงฺฏุฑ ูุดฺฉู ุญู ูุดุฏุ ูุงฺฏโูุง ฺฉุงูู ุฑุง ุงุฑุณุงู ฺฉูุฏ.

